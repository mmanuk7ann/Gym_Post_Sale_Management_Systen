<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>ğŸ—ƒï¸ Database Documentation - My Docs</title>
        <link href="../css/bootstrap.min.css" rel="stylesheet">
        <link href="../css/fontawesome.min.css" rel="stylesheet">
        <link href="../css/brands.min.css" rel="stylesheet">
        <link href="../css/solid.min.css" rel="stylesheet">
        <link href="../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="..">My Docs</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href=".." class="nav-link">ğŸ“„ Project Overview</a>
                            </li>
                            <li class="nav-item">
                                <a href="../api/" class="nav-link">ğŸ“˜ API Endpoints Documentation</a>
                            </li>
                            <li class="nav-item">
                                <a href="./" class="nav-link active" aria-current="page">ğŸ—ƒï¸ Database Documentation</a>
                            </li>
                            <li class="nav-item">
                                <a href="../frontend/" class="nav-link">ğŸ–¥ï¸ Frontend Interface</a>
                            </li>
                            <li class="nav-item">
                                <a href="../models/" class="nav-link">ğŸ¤– Modeling Service</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../api/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../frontend/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#database-documentation" class="nav-link">ğŸ—ƒï¸ Database Documentation</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#er-diagram" class="nav-link">ğŸ§© ER Diagram</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#table-descriptions" class="nav-link">ğŸ“Š Table Descriptions</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#data-generation" class="nav-link">ğŸ§ª Data Generation</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#dependencies" class="nav-link">ğŸ› ï¸ Dependencies</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#configuration" class="nav-link">ğŸ” Configuration</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="database-documentation">ğŸ—ƒï¸ Database Documentation</h1>
<p>This service manages the <strong>PostgreSQL database</strong> for the gym management system. It stores all backend data related to gyms, members, packages, attendance, transactions, and analytics (RFM &amp; CLV). The database is automatically populated with synthetic data each time the system is initialized, making it ideal for testing and demonstration purposes.</p>
<hr />
<h2 id="er-diagram">ğŸ§© ER Diagram</h2>
<p>The schema includes the following interconnected tables:</p>
<ul>
<li><code>gyms</code></li>
<li><code>customers</code></li>
<li><code>packages</code></li>
<li><code>attendance</code></li>
<li><code>transactions</code></li>
<li><code>rfm</code></li>
<li><code>clv</code></li>
</ul>
<p>ğŸ“ See schema image: 
<img alt="ERD" src="docs/ERD.jpg" /></p>
<hr />
<h2 id="table-descriptions">ğŸ“Š Table Descriptions</h2>
<h3 id="gyms">ğŸ¢ <code>gyms</code></h3>
<p>Stores registered gyms and login credentials.</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>gym_id</code></td>
<td>int</td>
<td>Primary key</td>
</tr>
<tr>
<td><code>name</code></td>
<td>varchar</td>
<td>Gym name</td>
</tr>
<tr>
<td><code>username</code></td>
<td>varchar</td>
<td>Login username</td>
</tr>
<tr>
<td><code>email</code></td>
<td>varchar</td>
<td>Login email</td>
</tr>
<tr>
<td><code>hashed_password</code></td>
<td>varchar</td>
<td>Encrypted password</td>
</tr>
<tr>
<td><code>address</code></td>
<td>varchar</td>
<td>Address</td>
</tr>
<tr>
<td><code>phone</code></td>
<td>varchar</td>
<td>Contact number</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="customers">ğŸ‘¥ <code>customers</code></h3>
<p>Contains all gym members.</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>customer_id</code></td>
<td>int</td>
<td>Primary key</td>
</tr>
<tr>
<td><code>gym_id</code></td>
<td>int</td>
<td>Foreign key â†’ gyms</td>
</tr>
<tr>
<td><code>name</code></td>
<td>varchar</td>
<td>Full name</td>
</tr>
<tr>
<td><code>email</code></td>
<td>varchar</td>
<td>Email</td>
</tr>
<tr>
<td><code>phone</code></td>
<td>varchar</td>
<td>Phone number</td>
</tr>
<tr>
<td><code>birth_date</code></td>
<td>date</td>
<td>Birth date</td>
</tr>
<tr>
<td><code>gender</code></td>
<td>varchar</td>
<td>Gender</td>
</tr>
<tr>
<td><code>join_date</code></td>
<td>date</td>
<td>Membership start date</td>
</tr>
<tr>
<td><code>status</code></td>
<td>varchar</td>
<td>Active, frozen, cancelled</td>
</tr>
<tr>
<td><code>package_id</code></td>
<td>int</td>
<td>Foreign key â†’ packages</td>
</tr>
<tr>
<td><code>trainer_id</code></td>
<td>int</td>
<td>Optional trainer link</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="packages">ğŸ“¦ <code>packages</code></h3>
<p>Membership options defined by each gym.</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>package_id</code></td>
<td>int</td>
<td>Primary key</td>
</tr>
<tr>
<td><code>gym_id</code></td>
<td>int</td>
<td>Foreign key â†’ gyms</td>
</tr>
<tr>
<td><code>name</code></td>
<td>varchar</td>
<td>Plan name</td>
</tr>
<tr>
<td><code>duration_months</code></td>
<td>int</td>
<td>Duration in months</td>
</tr>
<tr>
<td><code>price</code></td>
<td>decimal</td>
<td>Price of the package</td>
</tr>
<tr>
<td><code>description</code></td>
<td>text</td>
<td>Extra details</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="attendance">ğŸ•’ <code>attendance</code></h3>
<p>Tracks customer check-in and check-out activity.</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>attendance_id</code></td>
<td>int</td>
<td>Primary key</td>
</tr>
<tr>
<td><code>customer_id</code></td>
<td>int</td>
<td>Foreign key â†’ customers</td>
</tr>
<tr>
<td><code>check_in</code></td>
<td>datetime</td>
<td>Entry time</td>
</tr>
<tr>
<td><code>check_out</code></td>
<td>datetime</td>
<td>Exit time</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="transactions">ğŸ’¸ <code>transactions</code></h3>
<p>Financial transactions linked to each customer.</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>transaction_id</code></td>
<td>int</td>
<td>Primary key</td>
</tr>
<tr>
<td><code>customer_id</code></td>
<td>int</td>
<td>Foreign key â†’ customers</td>
</tr>
<tr>
<td><code>amount</code></td>
<td>int</td>
<td>Payment amount</td>
</tr>
<tr>
<td><code>date</code></td>
<td>date</td>
<td>Payment date</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="rfm">ğŸ“ˆ <code>rfm</code></h3>
<p>Recency-Frequency-Monetary scores for segmentation.</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>rfm_id</code></td>
<td>int</td>
<td>Primary key</td>
</tr>
<tr>
<td><code>customer_id</code></td>
<td>int</td>
<td>Foreign key â†’ customers</td>
</tr>
<tr>
<td><code>recency_score</code></td>
<td>int</td>
<td>Days since last activity</td>
</tr>
<tr>
<td><code>frequency_score</code></td>
<td>int</td>
<td>Visit frequency</td>
</tr>
<tr>
<td><code>monetary_score</code></td>
<td>decimal</td>
<td>Total amount spent</td>
</tr>
<tr>
<td><code>customer_segment</code></td>
<td>varchar</td>
<td>Segment classification</td>
</tr>
</tbody>
</table>
<hr />
<h3 id="clv">ğŸ’¡ <code>clv</code></h3>
<p>Predicted Customer Lifetime Value metrics.</p>
<table>
<thead>
<tr>
<th>Column</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>clv_id</code></td>
<td>int</td>
<td>Primary key</td>
</tr>
<tr>
<td><code>customer_id</code></td>
<td>int</td>
<td>Foreign key â†’ customers</td>
</tr>
<tr>
<td><code>clv_value</code></td>
<td>decimal</td>
<td>Estimated lifetime value</td>
</tr>
<tr>
<td><code>average_order_value</code></td>
<td>decimal</td>
<td>Avg. purchase amount</td>
</tr>
<tr>
<td><code>predicted_customer_type</code></td>
<td>varchar</td>
<td>Predicted behavior segment</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="data-generation">ğŸ§ª Data Generation</h2>
<p>This project uses <strong>synthetic data</strong>, automatically generated at runtime for testing purposes. All tables are filled with realistic but fake data (e.g. names, emails, payment history) to enable functional testing of API endpoints, dashboards, and analytics.</p>
<ul>
<li>No CSVs or external files are used to load the data.</li>
<li>Each time the app is restarted, a fresh dataset is generated.</li>
<li>Useful for showcasing features like churn detection and lifetime value predictions.</li>
</ul>
<hr />
<h2 id="dependencies">ğŸ› ï¸ Dependencies</h2>
<ul>
<li><code>SQLAlchemy</code> â€” ORM for defining models and managing schema</li>
<li><code>psycopg2-binary</code> â€” PostgreSQL driver</li>
<li><code>pandas</code> â€” Used optionally for tabular manipulation (e.g. RFM/CLV scoring)</li>
<li><code>dotenv</code> â€” Environment variable loading</li>
</ul>
<hr />
<h2 id="configuration">ğŸ” Configuration</h2>
<p>All credentials are stored in a <code>.env</code> file in the root of the project:</p>
<p>```env
DATABASE_URL=postgresql+psycopg2://postgres:password@db:5432/demodb
DB_USER=postgres
DB_PASSWORD=password
DB_NAME=demodb
PGADMIN_EMAIL=admin@admin.com 
PGADMIN_PASSWORD=admin
SECRET_KEY=secret-key</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../js/base.js"></script>
        <script src="../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
